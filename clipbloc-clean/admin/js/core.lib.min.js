var editorDiv=null;openEditorDiv=function(){if(editorDiv==null){editorDiv=document.createElement("div");editorDiv.id="uploadDiv";editorDiv.className="uploadDiv generic_trans";document.body.appendChild(editorDiv);var A=document.createElement("div");A.className="closeEditor";A.innerHTML="<img src='images/cancel-circle.png' />";A.onclick=function(){closeDivEditor(editorDiv)};if(lanTemp=="es"){editorDiv.innerHTML="<div style='width:100%;height:100%'><iframe src='../editor/enterUsu.php' style='width:100%;height:100%' frameBorder='0'/></div>"}else{editorDiv.innerHTML="<div style='width:100%;height:100%'><iframe src='../../editor/enterUsu.php' style='width:100%;height:100%' frameBorder='0'/></div>"}editorDiv.appendChild(A);setTimeout(function(){editorDiv.style.left="0%";endTrans=function(){endTrans=null}},10)}else{editorDiv.style.left="0%"}};closeDivEditor=function(A){A.style.overflow="hidden";A.style.left="-100%";endTrans=function(){endTrans=null}};var assocPage=null;var userClip=null;var bloc=null;var madeSelection=false;var _usersDiv=null;var _blocsDiv=null;var _clipsDiv=null;showUsersList=function(A){assocPage=A;var C=document.createElement("div");_usersDiv=C;toClose=C;C.id="usersDiv";C.className="usersDiv generic_trans";document.body.appendChild(C);var B=document.createElement("div");B.className="close";B.innerHTML="<img src='images/cancel-circle.png' />";B.onclick=function(){closeDivUsers(C)};var D=document.createElement("div");D.id="usersDivContent";D.className="usersDivContent";C.appendChild(D);C.appendChild(B);loadUsers(B)};closeDivUsers=function(A){A.style.overflow="hidden";A.style.left="-100%";endTrans=function(){document.body.removeChild(A);endTrans=null}};function users(){var A=this;A.tabs=ko.observableArray();A.showBlocs=function(B){showBlocs(B.rot)};A.close=null}var iniUsers=new users();loadUsers=function(A){$("#usersDivContent").load("./pages/users.html",function(){var B=new Date().getTime();$.ajax({url:"./controller/environment/dirs/usersList.php?"+B,dataType:"text",success:function(F){var E=F.split(",");var D=new Array();ko.applyBindings(iniUsers,document.getElementById("users_list"));for(var C in E){D[C]={};D[C]["rot"]=E[C]}iniUsers.tabs(D);iniUsers.close=A;setTimeout(function(){toClose.style.left="0%";endTrans=function(){endTrans=null}},10)}})})};showBlocs=function(A){var B=document.createElement("div");_blocsDiv=B;B.id="blocsDiv";B.className="blocsDiv generic_trans";document.body.appendChild(B);toClose=B;var C=document.createElement("div");C.className="close";C.innerHTML="<img src='images/cancel-circle.png' />";C.onclick=function(){closeBlocsDiv(B)};var D=document.createElement("div");D.id="blocsDivContent";D.className="blocsDivContent";B.appendChild(D);B.appendChild(C);loadBlocs(A,C)};closeBlocsDiv=function(A){A.style.overflow="hidden";A.style.left="-100%";if(madeSelection){document.body.removeChild(_usersDiv);madeSelection=false}endTrans=function(){document.body.removeChild(A);endTrans=null}};function blocs(){var A=this;A.tabs=ko.observableArray();A.showClips=function(B){showClips(B.rot)};A.emptyArray=ko.observable(A.tabs.length)}function blocs_home(){var A=this;A.tabs=ko.observableArray();A.close=null;A.selectClip=function(B){madeSelection=true;iniBlocsHome.close.click();document.getElementById("clipbloc_"+assocPage).value=userClip+"/xml/"+B.rot;document.getElementById("clipImg_"+assocPage).setAttribute("src","../editor/rmt/"+B.img+"/img.png");$("#clipbloc_"+assocPage).trigger("change")}}var iniBlocs=new blocs();var iniBlocsHome=new blocs_home();loadBlocs=function(A,B){userClip=A;$("#blocsDivContent").load("./pages/blocs.html",function(){document.getElementById("userBlocs").innerHTML=A;var C=new Date().getTime();$.ajax({url:"./controller/environment/dirs/blocsList.php?user="+A+"&refresh="+C,dataType:"text",success:function(I){var D=I.split("::");var H=D[0].split(",");var E=D[1].split(",");var G=new Array();for(var F in E){G[F]={};G[F]["rot"]=E[F].split(".")[0];G[F]["home"]=A;G[F]["img"]=A+"/xml/"+G[F]["rot"]}var J=new Array();for(var F in H){J[F]={};J[F]["rot"]=H[F];J[F]["home"]=A}ko.applyBindings(iniBlocsHome,document.getElementById("blocs_list_home"));ko.applyBindings(iniBlocs,document.getElementById("blocs_list"));iniBlocsHome.close=B;iniBlocsHome.tabs(G);iniBlocs.tabs(J);setTimeout(function(){toClose.style.left="0%";endTrans=function(){endTrans=null}},10)}})})};function clips(){var A=this;A.tabs=ko.observableArray();A.selectClip=function(B){madeSelection=true;iniClips.close.click();document.getElementById("clipbloc_"+assocPage).value=userClip+"/"+bloc+"/xml/"+B.rot;document.getElementById("clipImg_"+assocPage).setAttribute("src","../editor/rmt/"+B.img+"/img.png");$("#clipbloc_"+assocPage).trigger("change")};A.close=null}var iniClips=new clips();showClips=function(D){bloc=D;var A=document.createElement("div");_clipsDiv=A;A.id="clipsDiv";A.className="clipsDiv generic_trans";document.body.appendChild(A);toClose=A;var C=document.createElement("div");C.className="close";C.innerHTML="<img src='images/cancel-circle.png' />";C.onclick=function(){closeClipsDiv(A)};var B=document.createElement("div");B.id="clipsDivContent";B.className="clipsDivContent";A.appendChild(B);A.appendChild(C);loadClips(C)};closeClipsDiv=function(A){A.style.overflow="hidden";A.style.left="-100%";if(madeSelection){document.body.removeChild(_usersDiv);document.body.removeChild(_blocsDiv);madeSelection=false}endTrans=function(){document.body.removeChild(A);endTrans=null}};loadClips=function(A){$("#clipsDivContent").load("./pages/clips.html",function(){document.getElementById("userClips").innerHTML=bloc;var B=new Date().getTime();$.ajax({url:"./controller/environment/dirs/clipsList.php?user="+userClip+"&bloc="+bloc+"&refresh="+B,dataType:"text",success:function(F){var D=F.split(",");var C=new Array();for(var E in D){C[E]={};C[E]["rot"]=D[E].split(".")[0];C[E]["img"]=userClip+"/"+bloc+"/xml/"+C[E]["rot"]}ko.applyBindings(iniClips,document.getElementById("blocs_list_clips"));iniClips.tabs(C);iniClips.close=A;setTimeout(function(){toClose.style.left="0%";endTrans=function(){endTrans=null}},10)}})})};var http=getXMLHTTPRequestPage();function getXMLHTTPRequestPage(){try{req=new XMLHttpRequest()}catch(C){try{req=new ActiveXObject("Msxml2.XMLHTTP")}catch(B){try{req=new ActiveXObject("Microsoft.XMLHTTP")}catch(A){req=false}}}return req}var dropURL=null;var oriName=null;var ext=null;var imgPage=null;saveImgFb=function(B){imgPage=B.id.split("_")[1];var D=B.files;for(var C=0,E;E=D[C];C++){if(!E.type.match("image.*")){continue}var A=new FileReader();A.onloadend=this.onReaderLoadEnd;A.onload=(function(F){dropURL=F.name;oriName=F.name;ext=F.name.split(".");return function(H){var G=document.createElement("span");G.innerHTML=['<img class="thumb" src="',H.target.result,'" title="',escape(F.name),'"/>'].join("");if(F.size>400000){showAlert("La imagen es demasiado pesada. Redúcela y vuelve a intentarlo")}else{if(F.size<=400000||F.size>200000){showAlert("El tamaño de la imagen es alto, más de 200k. Puede tardar un poco en ser subida");processImage(F)}else{processImage(F)}}}})(E);processImage(E)}};function processImage(B){if(!B.type.match("image.*")){return}var A=new FileReader();A.onloadend=this.onReaderLoadEnd;A.readAsDataURL(B)}var saveImgPB=null;var imgResults=new Object();var imgName=null;function onReaderLoadEnd(A){if(user==="test"){alert(rots.testMode[lanTemp])}else{ImgTemp=A.target.result;var C=new Date();imgName="fbImg";var B=getXMLHTTPRequestPage();http=B;urlRecordPage="controller/saveImgFb.php?name="+oriName+"&ext="+ext[1]+"&URL=../../pages/"+imgPage+"/&endName="+imgName;var D=A.target.result;http.open("POST",urlRecordPage,true);http.onreadystatechange=handlerDrop;http.setRequestHeader("Content-Type","application/upload");http.send(D)}}function handlerDrop(){if(http.readyState==4){if(http.status==200){var A=new Date().getTime();document.getElementById("fbImg_"+imgPage).setAttribute("src","../pages/"+imgPage+"/fbImg.jpg?"+A)}}}var lanEnv=document.URL.split("/");var lanTemp=lanEnv[lanEnv.length-3];if(lanTemp.length>2){lanTemp="es"}var rots={security:{button:{es:"Cambiar",en:"Change"},rot:{es:"Login",en:"Login"},newUser:{es:"Nuevo Usuario",en:"News User"},user:{es:"Usuario",en:"User"},newPWD:{es:"Nueva Contraseña",en:"New Password"},PWD:{es:"Contraseña",en:"Password"},changing:{es:"Cambiando, por favor espere...",en:"Changing, please wait..."},changed:{es:"Cambiado",en:"Changed"}},testMode:{es:"Estas en modo test, no puedes grabar en este modo.",en:"You are in testing mode, it is not possible record from this mode"}};if(typeof language==="undefined"){var language="en"}var languages=["es","en"];var languagesRots={es:{es:"Castellano",en:"Inglés"},en:{es:"Spanish",en:"English"}};var showLanDiv=false;var lastLanSelected=null;var lastLanSelectedClass=null;var languageDiv=document.createElement("div");languageDiv.id="languageDiv";var languageDivInner=document.createElement("div");languageDivInner.id="languageDivInner";languageDiv.onclick=function(){languageDiv.style.left="-350px";showLanDiv=false};var oriDispLan=null;for(var j in languagesRots){for(var k in languagesRots[j]){var newLanPB=document.createElement("div");newLanPB.className="newLanPB "+j;newLanPB.setAttribute("selLan",k);newLanPB.innerHTML=languagesRots[j][k];newLanPB.onclick=function(C){if(lastLanSelected){lastLanSelected.className=lastLanSelectedClass;lastLanSelectedClass=C.target.className;lastLanSelected=C.target}language=C.target.getAttribute("selLan");var B=document.getElementsByClassName(language);for(var A in B){if(typeof B[A]==="object"&&B[A].getAttribute("selLan")===language){if(lastLanSelected){B[A].className=lastLanSelectedClass+" newLanPBSelected"}else{B[A].className+=" newLanPBSelected"}}}changeLanguage()};oriDispLan=newLanPB.style.display;languageDivInner.appendChild(newLanPB)}}languageDiv.appendChild(languageDivInner);var showLanguageDiv=function(A){if(showLanDiv){languageDiv.style.left="-350px"}else{languageDiv.style.left="0"}showLanDiv=!showLanDiv};var lastFlag=null;var changeLanguage=function(A,D){if(D){if(lastFlag){lastFlag.style.opacity="1"}lastFlag=D;lastFlag.style.opacity=".5"}if(A){language=A}for(var C in languages){if(languages[C]!==language){var B=document.getElementsByClassName(languages[C]);for(k=0;k<=B.length-1;k++){B[k].style.display="none"}}else{B=document.getElementsByClassName(languages[C]);for(k=0;k<=B.length-1;k++){B[k].style.display=oriDispLan}}}};if(typeof lanPB!=="undefined"){lanPB.innerHTML="<span class='es'>Idioma</span><span class='en'>Language</span>"}if(typeof privatePB!=="undefined"){privatePB.innerHTML="<span class='es'>Admin</span><span class='en'>Admin</span>"}selLan=function(){showLanguageDiv()};var lanPB=null;createLanDiv=function(){document.body.appendChild(languageDiv);lanPB=document.getElementById("lanPB");lanPB.onclick=function(){document.body.appendChild(languageDiv);showLanguageDiv()};var B=document.getElementsByClassName(language);for(var A in B){if(typeof B[A]==="object"&&B[A].getAttribute("selLan")===language){if(lastLanSelected){B[A].className=lastLanSelectedClass+" newLanPBSelected"}else{B[A].className+=" newLanPBSelected"}}}};controlSecurity=function(){document.body.style.overflow="hidden";var A=document.createElement("div");toClose=A;A.id="uploadDiv";A.className="uploadDiv generic_trans";document.body.appendChild(A);var C=document.createElement("div");C.className="close";C.innerHTML="<img src='images/cancel-circle.png' />";C.onclick=function(){closeDiv(A);document.body.style.overflow=""};var B="";B='<form enctype="multipart/form-data" class="formulario">                            <div class="row-fluid" >                            <div class="col-md-offset-4 col-md-4">                            <ul>                                <li style="white-space:nowrap;font-size:30px !important;padding-top:50px">"'+rots.security.rot[lanTemp]+'"</li>                                <li>"'+rots.security.user[lanTemp]+'"</li>                                <li><input type="text" name="user" id="user" /></li>                                <li>"'+rots.security.PWD[lanTemp]+'"</li>                                <li  style="padding-bottom:10px !important"><input type="text" name="oldPassword" id="oldPassword" /></li>                                <li>"'+rots.security.newUser[lanTemp]+'"</li>                                <li  style="padding-bottom:10px !important"><input type="text" name="newUser" id="newUser" /></li>                                <li>"'+rots.security.newPWD[lanTemp]+'"</li>                                <li  style="padding-bottom:10px !important"><input type="text" name="newPassword" id="newPassword" /></li>                                <li style="padding-top:50px"><input class="submitPB"  type="button" value="'+rots.security.button[lanTemp]+'" />                            </ul>                            </form>                            <div class="messages"></div><br /><br />                            </div></div>';A.innerHTML=B;A.appendChild(C);setTimeout(function(){toClose.style.left="0%";endTrans=function(){endTrans=null;formReadySecurity()}},10)};formReadySecurity=function(){$(".messages").hide();$(":button").click(function(){if(user==="test"){alert(rots.testMode[lanTemp])}else{var B=validate(document.getElementById("user").value);var F=validate(document.getElementById("oldPassword").value);var A=validate(document.getElementById("newUser").value);var G=validate(document.getElementById("newPassword").value);if(B&&A&&F&&G){var E={user:B,oldPassword:F,newUser:A,newPassword:G};var C="";var D={};D.user=B;D.oldPassword=F;D.newUser=A;D.newPassword=G;$.ajax({url:"controller/environment/security/webService.php",type:"GET",data:D,beforeSend:function(){C=$("<span class='before'>"+rots.security.changing[lanTemp]+"</span>");showMessage(C)},success:function(H){C=$("<span class='success'>"+rots.security.changed[lanTemp]+"</span>");showMessage(C)},error:function(){C=errorList["1"][lanTemp];showMessage(C)}})}else{C=errorList["0"][lanTemp];showMessage(C)}}})};function showMessage(A){$(".messages").html("").show();$(".messages").html(A)}var charAcepted=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","ñ","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","0"];var Base64_chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";var Base64_nostd="9ryoAuwh4RvMDPYKNltWUTaEqnBmbcSZFxfGg7iJj6QsVkOXzdH0C1p2e35L8I+/=";validate=function(B){var C=B;if(B==""){C=false}else{for(var A in B){if(charAcepted.indexOf(B[A])<0){C=false;break}}}return C};var errorList={"0":{es:"Ningún campo puede estar vacío.\nSólo se admiten carácteres\n de la a-z minúsculas\n y números 0-9",en:"No empty fields are accepted.\nOnly lowerCase a-z\n and numbers 0-9"},"1":{es:"Se ha producido un error",en:"Error"}};function My_atob(G,C){var D="";var F="";if(typeof(G)!="string"){return""}if(!(G.length>0)){return""}var B="";var E="";for(var A=0;A<G.length;A++){E=G.charAt(A);if(E=="="||E==" "||E=="t"||E=="r"||E=="n"){continue}else{E=C.indexOf(E)}D+=StrPad(str=E.toString(2),padchar="0",paddedstrlen=6,direction="l");if(D.length>=8){F+=String.fromCharCode(parseInt(D.substring(0,8),2));D=D.substring(8,D.length)}}return F}function My_btoa(I,J){var D=J.split("");var E="";if(typeof(I)!="string"){return""}if(!(I.length>0)){return""}var C="";var B="";var G="";for(var H=0;H<I.length;H+=3){C=I.charCodeAt(H)<<24;if(H+1<I.length){C|=I.charCodeAt(H+1)<<16}else{G++}if(H+2<I.length){C|=I.charCodeAt(H+2)<<8}else{G++}C>>=8;B="";var A=6;for(var F=0;F<4;F++){if(G==0||(G!=0&&F>G-1)){B=D[C&63]+B}else{B=B+"="}C>>=6}E+=B}return E}function StrPad(D,A,C,B){if(!B){B="l"}if(typeof(C)!="number"||typeof(A)!="string"){return D}if(!(A.length>0)||C<=0){return D}if(B.toLowerCase()=="r"){while(D.length<C){D=D+A.charAt(0)}}else{while(D.length<C){D=A.charAt(0)+D}}return D}var bridgeDiv=null;goBridge=function(){if(document.getElementById("bridgeDiv")){}else{bridgeDiv=document.createElement("div");bridgeDiv.id="bridgeDiv";bridgeDiv.className="bridgeDiv generic_trans";document.body.appendChild(bridgeDiv);bridgeDiv.onclick=function(){bridgeDiv.style.overflow="hidden";bridgeDiv.style.left="-100%";endTrans=function(){document.body.removeChild(bridgeDiv);bridgeDiv=null;lastHTML=null;endTrans=null}};var A=document.createElement("div");A.id="bridgeDivContainer";bridgeDiv.appendChild(A);var B=document.createElement("div");B.id="bridgeDivInner";B.onclick=function(C){if(C.stopPropagation){C.stopPropagation()}else{C.cancelBubble=true}};A.appendChild(B);$("#bridgeDivInner").load("pages/bridgeCode.html",function(){document.getElementById("logoBridgeDiv").innerHTML=document.getElementsByClassName("logo")[0].innerHTML;document.getElementById("rotBridgeDiv").innerHTML=bridgeRots.bridgeLoginRot[lanTemp];document.getElementById("bridgePB").innerHTML=bridgeRots.PB[lanTemp];document.getElementById("bridgePBClose").innerHTML=bridgeRots.closePB[lanTemp];setTimeout(function(){bridgeDiv.style.left="0%";endTrans=function(){endTrans=null}},10)})}};var multipleUserData=null;multipleUser=function(){params="method=readMultipleUser";loadXMLDoc("./controller/environment/multipleUser/multipleUserList.php",params)};var multipleUserList={};read_MultipleUser=function(B){multipleUserData=JSON.parse(B);if(lastPage.id!="page_menu_multipleUser"){document.getElementById("menu_level_2").id="old";var A=document.createElement("div");A.className="page generic_trans";A.id="page_menu_multipleUser";if(lastPage&&moveSense=="RE"){A.style.left="-100%"}else{A.style.left="100%"}all.appendChild(A);$("#page_menu_multipleUser").load("./pages/multipleUser.html",function(){var C=new users();ko.applyBindings(C,document.getElementById("menu_level_2"));C.ini();pageFocus=A})}};function item_user(D,F,C,I,K,H,A,B,E,G){var J=this;J.id=ko.observable();J.user=D;J.pwd=F;J.active=C;J.privAccess=I;J.privContent=K;J.type=H;J.nick=A;J.name=B;J.surname=E;J.email=G}function users(){var A=this;A.tabs=ko.observableArray();A.ini=function(){A.tabs(multipleUserData);setTimeout(function(){if(lastPage){lastPage.style.position="absolute";A.tabs(multipleUserData);if(moveSense=="AV"){lastPage.style.left="-100%";pageFocus.style.left="0px"}else{lastPage.style.left="100%";pageFocus.style.left="0px"}}else{A.tabs(multipleUserData);pageFocus.style.left="0px"}endTrans=function(){if(lastPage){all.removeChild(lastPage)}savePB=document.getElementById("savePB");message=document.getElementById("message");endTrans=null;lastPage=pageFocus}},10)};A.anadir=function(){A.tabs.splice(0,0,new item_user("user","pwd",0,0,0,"type","nick","name","surname","email"));message.innerHTML="Waiting...";message.className="col-xs-3 basicPB";savePB=document.getElementById("basicSavePB");savePB.className=savePB.className+" basicSavePB_active"};A.guardar=function(){var E="";if(user==="test"){showTestModeDiv()}else{for(var C in A.tabs()){for(var B in A.tabs()[C]){if(B!="id"){if(B=="active"||B=="privAccess"||B=="privContent"){E+="$data["+C+"]['"+B+"']="+A.tabs()[C][B]+";\n"}else{E+="$data["+C+"]['"+B+"']='"+A.tabs()[C][B]+"';\n"}}}}var D={};D.CUERPO=E;message.innerHTML="Guardando";message.style.display="inline-block";savePB.className="generic_pb";$.ajax({url:"controller/environment/multipleUser/webService.php",type:"GET",data:D,beforeSend:function(){showMessageUsers("Guardando")},success:function(F){showMessageUsers("Guardado")},error:function(){showMessageUsers("Error")}})}};A.eliminar=function(B){A.tabs.remove(B);message.innerHTML="Waiting...";message.className="col-xs-3 basicPB";savePB=document.getElementById("basicSavePB");savePB.className=savePB.className+" basicSavePB_active"};A.regOnline=function(){multipleUserRegList()}}function showMessageUsers(A){message.innerHTML="Saved";message.className=message.className+" message_active";savePB.className="col-xs-3 basicPB"}var onlineRegList=null;var abc=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"];function multipleUserRegList(){var C=document.createElement("div");C.id="regOnlineDiv";C.className="regOnlineDiv generic_trans";var E=document.createElement("div");E.className="close";E.innerHTML="<img src='images/cancel-circle.png' />";E.onclick=function(){closeDiv(C)};C.appendChild(E);for(var A in abc){var B=document.createElement("div");B.id="item_"+abc[A];B.innerHTML=abc[A];B.className="itemABC";C.appendChild(B);B.onclick=function(){showRegOnline(event.target.innerHTML)}}var D=document.createElement("div");D.id="regOnlineListDiv";C.appendChild(D);document.body.appendChild(C);$("#regOnlineListDiv").load("./pages/onlineReg.html",function(){setTimeout(function(){onlineRegList=new reg_online();ko.applyBindings(onlineRegList,document.getElementById("reg_online"));C.style.left="0%";endTrans=function(){endTrans=null}},10)})}function showRegOnline(A){onlineRegList.ini(A)}function reg_online(){var A=this;A.tabs=ko.observableArray();A.ini=function(B){var C={};C.itemABC=B;$.ajax({url:"controller/environment/dirs/usersRegList.php",type:"POST",data:C,beforeSend:function(){},success:function(D){A.tabs(D.items)},error:function(){}})};A.eliminar=function(E){document.getElementById("user_"+E.activator).innerHTML="";var B={};for(var C in E){if(E[C]===true){B[C]="true"}else{if(E[C]===false){B[C]="false"}else{B[C]=E[C]}}}var D=JSON.stringify(B);var F={};F.user=D;$.ajax({url:"controller/environment/dirs/delUserReg.php",type:"POST",data:F,beforeSend:function(){},success:function(G){document.getElementById("user_"+E.activator).innerHTML=G},error:function(){document.getElementById("user_"+E.activator).innerHTML="ERROR"}})};A.guardar=function(E){document.getElementById("user_"+E.activator).innerHTML="";var B={};for(var C in E){if(E[C]===true){B[C]="true"}else{if(E[C]===false){B[C]="false"}else{B[C]=E[C]}}}var D=JSON.stringify(B);var F={};F.user=D;$.ajax({url:"controller/environment/dirs/saveUserReg.php",type:"POST",data:F,beforeSend:function(){},success:function(G){document.getElementById("user_"+E.activator).innerHTML=G},error:function(){document.getElementById("user_"+E.activator).innerHTML="ERROR"}})}}controlFiles=function(){document.body.style.overflow="hidden";var A=document.createElement("div");toClose=A;A.id="uploadDiv";A.className="uploadDiv generic_trans";document.body.appendChild(A);var C=document.createElement("div");C.className="close";C.innerHTML="<img src='images/cancel-circle.png' />";C.onclick=function(){closeDiv(A);document.body.style.overflow=""};var B="";B='<form enctype="multipart/form-data" class="formulario">                            <div class="row-fluid" >                            <div class="col-md-offset-4 col-md-4">                            <ul>                                <li style="white-space:nowrap;font-size:30px !important;padding-top:50px">" Actualizaciones y archivos "</li>                                <li>Destino</li>xxx/xxx/                                <li><input type="text" name="destiny" id="destiny" /></li>                                <li>Código de seguridad</li>0129                                <li  style="padding-bottom:50px"><input type="text" name="security" id="security" /></li>                                <li class="selFilePB"><input class="selFile" name="archivo" type="file" id="imagen" /></li>                                <li style="padding-top:50px"><input class="submitPB"  type="button" value="Subir Archivo" />                            </ul>                            </form>                            <div class="messages"></div><br /><br />                            <div class="showImage"></div>                            </div></div>';A.innerHTML=B;A.appendChild(C);setTimeout(function(){toClose.style.left="0%";endTrans=function(){endTrans=null;formReady()}},10)};formReady=function(){$(".messages").hide();var A="";$(":file").change(function(){var D=$("#imagen")[0].files[0];var E=D.name;A=E.substring(E.lastIndexOf(".")+1);var B=D.size;var C=D.type;showMessage("<span class='info'>Archivo para subir: "+E+", peso total: "+B+" bytes.</span>")});$(":button").click(function(){if(user==="test"){alert(rots.testMode[lanTemp])}else{var C=new FormData($(".formulario")[0]);var B="";if(document.getElementById("security").value=="0129"){$.ajax({url:"controller/webService16.php",type:"POST",data:C,cache:false,contentType:false,processData:false,beforeSend:function(){B=$("<span class='before'>Subiendo el archivo, por favor espere...</span>");showMessage(B)},success:function(D){B=$("<span class='success'>El archivo se ha subido correctamente.</span>");showMessage(B);if(isImage(A)){$(".showImage").html("<img src='"+D+"' />")}},error:function(){B=$("<span class='error'>Ha ocurrido un error.</span>");showMessage(B)}})}else{B="<span class='success'>No está autorizado para llevar a cabo esta operación.</span>";showMessage(B)}}})};function showMessage(A){$(".messages").html("").show();$(".messages").html(A)}function isImage(A){switch(A.toLowerCase()){case"jpg":case"gif":case"png":case"jpeg":return true;break;default:return false;break}}var applyStyles=function(A){style_collection(A)};function item_style(B,C){var A=this;A.content=B;A.styleRule=C}function applyFonts(){var A=new Date().getTime();$.getJSON("../controller/environment/json/fonts.json?"+A,function(B){}).complete(function(D){self.count=D.responseJSON.items.length;var C=new Array();for(var B in D.responseJSON.items){C.push(D.responseJSON.items[B].content)}WebFontConfig={google:{families:C}};(function(){var E=document.createElement("script");E.src=("https:"==document.location.protocol?"https":"http")+"://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js";E.type="text/javascript";E.async="true";var F=document.getElementsByTagName("script")[0];F.parentNode.insertBefore(E,F)})()})}function style_collection(){var A=this;A.destiny=null;A.tabs=ko.observableArray();A.ini=function(B,D){A.destiny=D;var C=new Date().getTime();switch(A.destiny){case"Admin css":var C=new Date().getTime();$.ajax({url:"./css/css1.css?"+C,dataType:"text",success:function(I){var G=I.split("}");var F=0;G.pop();for(var E in G){var H=G[E].split("{");if(F){if($.trim(G[E]).length===0){stringCssRule+="}\n}";F=0;A.tabs.push(new item_style(stringCssRule,selector))}else{stringCssRule+="}";stringCssRule+=G[E]}}else{if(G[E].indexOf("@media")>=0){stringCssRule="";selector=H[0];stringCssRule+=G[E];F=1}else{stringCssRule="";selector=H[0];stringCssRule+=selector+"{";stringCssRule+=H[1];stringCssRule+="}";A.tabs.push(new item_style(stringCssRule,selector))}}}}});break;case"Interfaz css":var C=new Date().getTime();$.ajax({url:"../css/css1.css?"+C,dataType:"text",success:function(I){var G=I.split("}");var F=0;G.pop();for(var E in G){var H=G[E].split("{");if(F){if($.trim(G[E]).length===0){stringCssRule+="}\n}";F=0;A.tabs.push(new item_style(stringCssRule,selector))}else{stringCssRule+="}";stringCssRule+=G[E]}}else{if(G[E].indexOf("@media")>=0){stringCssRule="";selector=H[0];stringCssRule+=G[E];F=1}else{stringCssRule="";selector=H[0];stringCssRule+=selector+"{";stringCssRule+=H[1];stringCssRule+="}";A.tabs.push(new item_style(stringCssRule,selector))}}}}});break}};A.guardar=function(){if(user==="test"){alert(rots.testMode[lanTemp])}else{message.style.display="none";var C="";ko.utils.arrayForEach(A.tabs(),function(D){C+=D.content+""});switch(A.destiny){case"Admin css":var B="method=save_css&CUERPO="+encodeURI(C)+"&URL=../../css/css1.css";break;case"Interfaz css":B="method=save_css&CUERPO="+encodeURI(C)+"&URL=../../../css/css1.css";break}loadXMLDoc("./controller/environment/save.php",B)}}}var save_css=function(A){message.style.display="inline-block";message.innerHTML="Saved";savePB=document.getElementById("basicSavePB");savePB.className="col-xs-6 basicPB";message.className=message.className+" message_active"};var req;function loadXMLDoc(A,C){if(window.XMLHttpRequest){try{req=new XMLHttpRequest()}catch(B){req=false}}else{if(window.ActiveXObject){try{req=new ActiveXObject("Msxml2.XMLHTTP")}catch(B){try{req=new ActiveXObject("Microsoft.XMLHTTP")}catch(B){req=false}}}}if(req){req.onreadystatechange=processReqChange;req.open("POST",A,true);req.setRequestHeader("Content-Type","application/x-www-form-urlencoded");req.send(C);return true}}function getNodeValue(B,A){var C=B.getElementsByTagName(A)[0];return(C&&C.firstChild)?C.firstChild.nodeValue:false}function processReqChange(){if(req.readyState==4&&req.status==200){var F=req.responseText.replace("/**/","");function B(H){if(window.ActiveXObject){var G=new ActiveXObject("Microsoft.XMLDOM");G.async="false";G.loadXML(H)}else{var I=new DOMParser();var G=I.parseFromString(H,"text/xml")}return G}var E=B(F);response=E;var A=response.getElementsByTagName("command");for(var C=0;C<A.length;C++){method=A[C].getAttribute("method");switch(method){case"save_JSON":var D=getNodeValue(A[C],"message");save_JSON(D);break;case"save_page":var D=getNodeValue(A[C],"message");save_page(D);break;case"save_group_JSON":var D=getNodeValue(A[C],"message");save_group_JSON(D);break;case"save_css":var D=getNodeValue(A[C],"message");save_css(D);break;case"readMultipleUser":var D=getNodeValue(A[C],"message");read_MultipleUser(base64_decode(D));break;default:window.console.log("Error: unrecognised method '"+method+"' in processReqChange()")}}}}function base64_decode(H){var D="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";var C,B,A,L,K,J,I,M,G=0,N=0,E="",F=[];if(!H){return H}H+="";do{L=D.indexOf(H.charAt(G++));K=D.indexOf(H.charAt(G++));J=D.indexOf(H.charAt(G++));I=D.indexOf(H.charAt(G++));M=L<<18|K<<12|J<<6|I;C=M>>16&255;B=M>>8&255;A=M&255;if(J==64){F[N++]=String.fromCharCode(C)}else{if(I==64){F[N++]=String.fromCharCode(C,B)}else{F[N++]=String.fromCharCode(C,B,A)}}}while(G<H.length);E=F.join("");return E.replace(/\0+$/,"")}var buttonPress=null;function swipedetect(C,M){var L=C,D,H,F,K,J,G=150,I=100,B=300,N,A,E=M||function(O){};L.addEventListener("touchstart",function(P){if(P.target){buttonPress=P.target.id}else{buttonPress=null}var O=P.changedTouches[0];D="none";dist=0;H=O.pageX;F=O.pageY;A=new Date().getTime()},false);L.addEventListener("touchmove",function(O){},false);L.addEventListener("touchend",function(P){var O=P.changedTouches[0];K=O.pageX-H;J=O.pageY-F;N=new Date().getTime()-A;if(N<=B){if(Math.abs(K)>=G&&Math.abs(J)<=I){D=(K<0)?"left":"right"}else{if(Math.abs(J)>=G&&Math.abs(K)<=I){D=(J<0)?"up":"down"}}}E(D)},false)}var jsCollection={};var execAddJS=function(jsFile,param,root,css){if(!jsCollection[jsFile]){var headID=document.getElementsByTagName("head")[0];var newScript=document.createElement("script");if(css){var cssNode=document.createElement("link");cssNode.type="text/css";cssNode.rel="stylesheet";cssNode.href=css+".css";cssNode.media="screen";headID.appendChild(cssNode)}newScript.type="text/javascript";newScript.src="./js/"+root+jsFile+".js";headID.appendChild(newScript);jsCollection[jsFile]=true}else{eval(jsFile)()}};var endTrans=null;document.addEventListener("transitionend",function(A){if(endTrans!==null){endTrans()}},false);document.addEventListener("webkitTransitionEnd",function(){if(endTrans!==null){endTrans()}});var HTML=new Array();var HTMLBG="";var lastHTML=null;var divHTMLContainer=null;var showMenuHTML=false;getHTML=function(B,G,C,A,J,H){document.body.style.overflow="hidden";var E=document.createElement("div");E.id="htmlDiv";E.className="htmlDiv generic_trans";var O=document.createElement("div");O.className="closePB";O.innerHTML="x";O.onclick=function(){document.body.style.overflow="";closeDiv(E)};var N="";var M="";E.innerHTML="<div id='htmlContent' style='height:100%;position:relative'></div>";E.appendChild(O);var L=document.createElement("div");L.className="htmlMenu";L.innerHTML="Menu HTML";L.onclick=function(){showHTMLMenu()};E.appendChild(L);divHTMLContainer=document.createElement("div");divHTMLContainer.className="divHTMLContainer";E.appendChild(divHTMLContainer);divHTMLContainer.onclick=function(P){showHTMLMenu()};var F=document.createElement("div");F.className="showHTMLPB";F.innerHTML="Language";F.onclick=function(){showLanguageDiv()};divHTMLContainer.appendChild(F);var D=document.createElement("div");D.className="showHTMLPB";D.innerHTML="Show HTML Code";D.onclick=function(){removeMark();showHTML(B,G,C,A,J,H)};divHTMLContainer.appendChild(D);var K=document.createElement("div");K.className="showHTMLPB";K.innerHTML="Copy/Import HTML Code";K.style.top="80px";K.onclick=function(){copyHTML()};divHTMLContainer.appendChild(K);document.body.appendChild(E);var I=new Date().getTime();$("#htmlContent").load("../controller/proxy.php?url=../pages/"+J+".html",function(){if(E.offsetHeight<=300){E.style.height="300px !important"}if(document.getElementById("htmlContent").offsetHeight<=300){$("#htmlContent").css("height","300px")}if(document.getElementById("htmlContent").innerHTML.substr(0,4)==="CLIP"){document.getElementById("htmlContent").innerHTML="<div id='htmlContent' style='height:100%;position:relative'>\n<div class='basicOuter'><div class='basicInner'>CLIP</div></div>\n</div>"}setTimeout(function(){changeLanguage();E.style.left="0px";endTrans=function(){if(lastHTML){document.body.removeChild(lastHTML)}lastHTML=null;endTrans=null;lastHTML=E;modPartialCode()}},10)})};var showHTMLMenu=function(A){if(showMenuHTML){divHTMLContainer.style.right=-divHTMLContainer.offsetWidth+"px"}else{divHTMLContainer.style.right="0";if(htmlCodesDiv){closeCodesDiv(htmlCodesDiv)}}showMenuHTML=!showMenuHTML};closeDiv=function(A){A.style.overflow="hidden";A.style.left="-100%";if(copyHTMLMode){lastHTMLCodes.style.left="100%"}endTrans=function(){endTrans=null;document.body.removeChild(A);lastHTML=null;if(copyHTMLMode){document.body.removeChild(lastHTMLCodes);lastHTMLCodes=null;copyHTMLMode=false}}};var inputDiv=null;showHTML=function(C,G,E,A,I,H){var F=document.createElement("div");F.className="showHTML generic_trans";var L=document.createElement("div");L.className="closePB";L.innerHTML="X";inputDiv=F;L.onclick=function(){closeDivHTML(F)};var B=document.createElement("div");B.id="divHTMLInput";B.className="divHTMLInput";var J=document.createElement("textarea");J.className="HTMLInput";var D=document.getElementById("htmlContent").innerHTML;D=D.replace("&amp;","&");if(D.indexOf("htmlContent")<=-1||D.indexOf("clipblocImport::")){J.value="<div id='htmlContent' style='height:100%;position:relative'>\n<div class='basicOuter'><div class='basicInner'>CLIP</div></div>\n</div>"}else{J.value=D}if(D.indexOf("htmlContent")>=0||D.indexOf("clipblocImport::")>=0){J.value=D}else{J.value="<div id='htmlContent' style='height:100%;position:relative'>\n<div class='basicOuter'><div class='basicInner'>CLIP</div></div>\n</div>"}B.appendChild(J);F.appendChild(B);var K=document.createElement("div");K.className="save";K.innerHTML="Save";K.onclick=function(){alert("here");saveHTMLPage(J.value,C,G,E,A,I,F,H)};K.onclick=function(){if(user==="test"){showTestModeDiv()}else{saveHTMLPage(J.value,C,G,E,A,I,F,H)}};F.appendChild(K);F.appendChild(L);document.body.appendChild(F);setTimeout(function(){F.style.left="0px";endTrans=function(){endTrans=null}},10)};closeDivHTML=function(A){A.style.overflow="hidden";A.style.left="-100%";endTrans=function(){document.body.removeChild(A);endTrans=null;modPartialCode()}};saveHTMLPage=function(J,C,G,E,B,I,A,H){if(document.getElementById("htmlContent")){document.getElementById("htmlContent").innerHTML=J}var F=J;var D={};D.CUERPO=F;D.URL="../../../pages/"+I+".html";D.type="../../../pages/"+I;D.name=document.URL.split("/")[2];D.rot=C;D.desc=G;D.image=E;D.url=B;D.fbToClip=H;D.service="./controller/environment/save.php";$.ajax({url:D.service,type:"POST",data:D,beforeSend:function(){},success:function(K){if(document.getElementById("htmlContent")){save_page()}},error:function(){}})};save_page=function(){closeDivHTML(inputDiv)};var copyHTMLMode=false;var lastHTMLCodes=null;closeCodesDiv=function(A){copyHTMLMode=false;A.style.left="100%";if(lastHTML!=null){lastHTML.style.width="100%"}endTrans=function(){endTrans=null;document.body.removeChild(A);lastHTMLCodes=null}};var htmlCodesDiv=null;copyHTML=function(){copyHTMLMode=true;if(!document.getElementById("htmlCodesDiv")){htmlCodesDiv=document.createElement("div");htmlCodesDiv.id="htmlCodesDiv";htmlCodesDiv.className="htmlCodesDiv generic_trans";htmlCodesDiv.innerHTML="Copiar o Importar Código";lastHTMLCodes=htmlCodesDiv;var H=document.createElement("div");H.className="closePB";H.innerHTML="x";H.onclick=function(){closeCodesDiv(htmlCodesDiv)};var G=document.createElement("p");G.className="genericRot_vertical";var E=document.createElement("p");E.className="genericRot_vertical";E.innerHTML="Importa un clip enlazando con su html, o cargando el html";var A=document.createElement("div");A.className="genericPB_vertical";A.innerHTML="Importar Clip";A.onclick=function(){pagesList()};var F=document.createElement("p");F.className="genericRot_vertical";F.innerHTML="Introduce la URL to Import</br>http://";var C=document.createElement("input");var B=document.createElement("div");B.className="genericPB_vertical";B.innerHTML="Set Import URL";B.onclick=function(){setURLImport(C)};var D=document.createElement("div");D.className="genericPB_vertical";D.innerHTML="Load HTML from URL";D.onclick=function(){loadURLContent(C)};htmlCodesDiv.appendChild(H);htmlCodesDiv.appendChild(G);htmlCodesDiv.appendChild(E);htmlCodesDiv.appendChild(A);htmlCodesDiv.appendChild(F);htmlCodesDiv.appendChild(C);htmlCodesDiv.appendChild(B);htmlCodesDiv.appendChild(D);document.body.appendChild(htmlCodesDiv);setTimeout(function(){htmlCodesDiv.style.left="75%";lastHTML.style.width="75%";endTrans=function(){endTrans=null}},10)}};closePagesListDiv=function(A){A.style.overflow="hidden";A.style.left="-100%";endTrans=function(){endTrans=null;pagesListDiv=null;document.body.removeChild(A)}};var pagesListDiv=null;var pagesListActive=false;pagesList=function(){pagesListDiv=document.createElement("div");pagesListDiv.id="pagesListDiv";pagesListDiv.className="pagesListDiv generic_trans";var D=document.createElement("div");D.id="pagesListDivContainer";D.style.width="100%";D.style.marginTop="100px";var C=document.createElement("div");C.className="closePB";C.innerHTML="x";C.onclick=function(){closePagesListDiv(pagesListDiv)};pagesListDiv.appendChild(C);pagesListDiv.appendChild(D);document.body.appendChild(pagesListDiv);var B="group_imports";var A=new Date().getTime();$("#pagesListDivContainer").load("./pages/"+B+".html?"+A,function(){var E=new sectionsImportList();ko.applyBindings(E,document.getElementById("import_sections"));E.ini()});setTimeout(function(){pagesListDiv.style.left="0%";endTrans=function(){endTrans=null}},10)};function sectionsImportList(){var A=this;A.tabs=ko.observable();A.ini=function(){$.getJSON("../controller/environment/json/groups.json",function(B){}).complete(function(B){A.tabs(B.responseJSON.items)})};A.importHTML=function(C){var B=window.location.toString();B=B.split("/").slice(0,-2).join("/");document.getElementById("htmlContent").innerHTML="clipblocImport::"+B+"/pages/"+C.date+".html";closePagesListDiv(pagesListDiv)};A.SelSectionSub=function(B){pagesImportSubList(B.submenu)};A.loadHTML=function(D){var C=window.location.toString();C=C.split("/").slice(0,-2).join("/");var B=new Date().getTime();$("#htmlContent").load(C+"/pages/"+D.date+".html?"+B,function(){});closePagesListDiv(pagesListDiv)}}closePagesSubListDiv=function(A){A.style.overflow="hidden";A.style.left="-100%";endTrans=function(){pagesListActive=false;endTrans=null;document.body.removeChild(A)}};var pagesSubListDiv=null;var listOri=null;pagesImportSubList=function(A){listOri=A;pagesListActive=true;pagesSubListDiv=document.createElement("div");pagesSubListDiv.id="pagesSubListDiv";pagesSubListDiv.className="pagesListDiv generic_trans";pagesSubListDiv.innerHTML="Copiar o Importar Código de clips internos";var D=document.createElement("div");D.id="pagesSubListDivContainer";D.style.width="100%";D.style.marginTop="100px";var E=document.createElement("div");E.className="closePB";E.innerHTML="x";E.onclick=function(){closePagesSubListDiv(pagesSubListDiv)};pagesSubListDiv.appendChild(E);pagesSubListDiv.appendChild(D);document.body.appendChild(pagesSubListDiv);var C="group_imports_sub";var B=new Date().getTime();$("#pagesSubListDivContainer").load("./pages/"+C+".html",function(){var F=new sectionsImportSubList();ko.applyBindings(F,document.getElementById("import_sections_subList"));F.ini(A)});setTimeout(function(){pagesSubListDiv.style.left="0%";endTrans=function(){endTrans=null}},10)};function sectionsImportSubList(){var A=this;A.tabs=ko.observable();A.ini=function(B){var C=new Date().getTime();$.getJSON("../controller/environment/json/"+B+".json?"+C,function(D){}).complete(function(D){A.tabs(D.responseJSON.items)})};A.importHTML=function(C){if(pagesListActive){document.body.removeChild(pagesListDiv);pagesListDiv=null;pagesListActive=false}var B=window.location.toString();B=B.split("/").slice(0,-2).join("/");document.getElementById("htmlContent").innerHTML="clipblocImport::"+B+"::"+listOri+"::"+C.date+"::";closePagesSubListDiv(pagesSubListDiv)};A.loadHTML=function(D){var C=window.location.toString();C=C.split("/").slice(0,-2).join("/");var B=new Date().getTime();if(document.getElementById("htmlContent")){$("#htmlContent").load(C+"/controller/proxy.php?url=../pages/"+D.date+".html",function(){modPartialCode()})}else{$("#htmlContent").load(C+"/controller/proxy.php?url=../pages/"+D.date+".html",function(){modPartialCode()})}if(pagesListActive){document.body.removeChild(pagesListDiv);pagesListDiv=null;pagesListActive=false}closePagesSubListDiv(pagesSubListDiv)}}setURLImport=function(A){var D=new Date().getTime();var C=A.value.split("/");var B=C[C.length-1];C.pop();document.getElementById("htmlContent").innerHTML="clipblocImport::http://"+C.join("/")+"::"+B};loadURLContent=function(A){var D=A.value.split("/");var C=D[D.length-1];D.pop();var B=D.join("/")+"/controller/proxy.php?url=../pages/"+C;var E=new Date().getTime();if(document.getElementById("htmlContent")){$("#htmlContent").load("http://"+B+".html",function(){modPartialCode()})}else{document.getElementById("htmlDiv").innerHTML='<div id="htmlContent" style="height:100%;position:relative"><div id="divResalt" style="position: absolute; border: 4px dotted rgb(221, 221, 221); width: 1701px; height: 865px; top: 0px; left: 0px; z-index: -1; background: rgba(174, 225, 242, 0.498039);"></div><div id="htmlContent" style="padding-top:100px;height:100%;position:relative">Sin contenidos por el momento en 2</div></div>';$("#htmlContent").load("http://"+B+".html",function(){modPartialCode()})}};var divResalt=document.createElement("div");divResalt.id="divResalt";divResalt.style.position="absolute";divResalt.style.background="rgba(174, 225, 242, .5)";divResalt.style.border="4px dotted #ddd";var containerResalt=null;var delResalt=null;var drawMark=function(A){divResalt.style.width=A.offsetWidth+"px";divResalt.style.height=A.offsetHeight+"px";divResalt.style.top=A.offsetTop+"px";divResalt.style.left=A.offsetLeft+"px";divResalt.style.zIndex=A.style.zIndex-1;containerResalt=A.parentNode;containerResalt.insertBefore(divResalt,containerResalt.firstChild);delResalt=function(){if(document.getElementById("divResalt")){containerResalt.removeChild(divResalt)}}};var removeMark=function(){if(delResalt){delResalt();delResalt=null}};var modPartialCode=function(){var G=document.getElementById("htmlContent");var B=G.getElementsByTagName("span");for(var D=0;D<=B.length-1;D++){B[D].onmouseover=function(H){H.cancelBubble=true;drawMark(H.target)};B[D].onmouseout=function(H){};B[D].onclick=function(H){removeMark();H.cancelBubble=true;showCode(H.target)}}var B=G.getElementsByTagName("textarea");for(var D=0;D<=B.length-1;D++){B[D].onmouseover=function(H){H.cancelBubble=true;drawMark(H.target)};B[D].onmouseout=function(H){};B[D].onclick=function(H){removeMark();H.cancelBubble=true;showCode(H.target)}}var B=G.getElementsByTagName("input");for(var D=0;D<=B.length-1;D++){B[D].onmouseover=function(H){H.cancelBubble=true;drawMark(H.target)};B[D].onmouseout=function(H){};B[D].onclick=function(H){removeMark();H.cancelBubble=true;showCode(H.target)}}var B=G.getElementsByTagName("p");for(var D=0;D<=B.length-1;D++){B[D].onmouseover=function(H){H.cancelBubble=true;drawMark(H.target)};B[D].onmouseout=function(H){};B[D].onclick=function(H){removeMark();H.cancelBubble=true;showCode(H.target)}}var F=G.getElementsByTagName("div");for(var D=0;D<=F.length-1;D++){F[D].onmouseover=function(H){H.cancelBubble=true;drawMark(H.target)};F[D].onmouseout=function(H){};F[D].onclick=function(H){removeMark();H.cancelBubble=true;showCode(H.target)}}var E=G.getElementsByTagName("ul");for(var D=0;D<=E.length-1;D++){E[D].onmouseover=function(H){H.cancelBubble=true;drawMark(H.target)};E[D].onmouseout=function(H){};E[D].onclick=function(H){removeMark();H.cancelBubble=true;showCode(H.target)}}var C=G.getElementsByTagName("li");for(var D=0;D<=C.length-1;D++){C[D].onmouseover=function(H){H.cancelBubble=true;drawMark(H.target)};C[D].onmouseout=function(H){};C[D].onclick=function(H){removeMark();H.cancelBubble=true;showCode(H.target)}}var A=G.getElementsByTagName("IMG");for(var D=0;D<=A.length-1;D++){A[D].onmouseover=function(H){H.cancelBubble=true;drawMark(H.target)};A[D].onmouseout=function(H){};A[D].onclick=function(H){removeMark();H.cancelBubble=true;showCode(H.target)}}};closeModCodesDiv=function(A){modHTMLMode=false;A.style.left="100%";endTrans=function(){endTrans=null;document.body.removeChild(A);lastHtmlModCodesDiv=null}};var lastHtmlModCodesDiv=null;var modHTMLMode=false;var showCode=function(H){modHTMLMode=true;var K=document.createElement("div");K.id="htmlModCodesDiv";K.className="generic_trans";K.innerHTML="Modificar Código";lastHtmlModCodesDiv=K;var L=document.createElement("div");L.className="closePB";L.innerHTML="x";L.onclick=function(){setTimeout(function(){K.style.right="-100%";endTrans=function(){endTrans=null;closeModCodesDiv(K)}},10)};L.style.position="absolute";L.style.top="10px";L.style.right="10px";var I=document.createElement("p");I.className="genericRot_vertical";I.innerHTML="Type: "+H.toString();var P=document.createElement("textarea");P.style.height="200px";P.value=H.innerHTML;P.addEventListener("input",function(){F.onclick()});var F=document.createElement("div");F.className="genericPB_vertical";F.innerHTML="Set Code";F.style.position="fixed";F.style.top="0";K.appendChild(L);K.appendChild(I);K.appendChild(P);K.appendChild(F);var M={};M.className=H.className;M.id=H.id;M.onclick=H.getAttribute("onclick");for(var S in M){var G=document.createElement("p");G.style.marginTop="20px";G.style.textAlign="left";G.style.color="red";G.innerHTML=S;switch(S){case"onclick":var O=document.createElement("p");O.className="genericRot_vertical";O.style.color="#aaa";O.innerHTML="Use ' Inside onclick ";K.appendChild(O);var A=document.createElement("textarea");A.addEventListener("input",function(){F.onclick()});A.style.height="150px";break;default:var A=document.createElement("input");break}A.value=M[S];M[S]=A;K.appendChild(G);K.appendChild(A)}switch(H.toString()){case"[object HTMLParagraphElement]":break;case"[object HTMLDivElement]":break;case"[object HTMLImageElement]":var V=document.createElement("p");V.className="genericRot_vertical";V.innerHTML="url Img";var E=document.createElement("textarea");E.addEventListener("input",function(){F.onclick()});E.style.height="150px";E.value=H.src.toString();K.appendChild(V);K.appendChild(E);M.src=E;break;default:break}var J=document.createElement("p");J.className="genericRot_vertical";J.style.color="red";J.style.marginTop="20px";J.innerHTML="Internal Navigation";K.appendChild(J);var N={};var Q=document.createElement("p");Q.className="genericRot_vertical";Q.style.marginTop="20px";Q.innerHTML="Page";K.appendChild(Q);var W=document.createElement("input");W.value=H.getAttribute("toPage");K.appendChild(W);N.page=W;var R=document.createElement("p");R.className="genericRot_vertical";R.style.marginTop="20px";R.innerHTML="SubPage";K.appendChild(R);var B=document.createElement("input");B.value=H.getAttribute("toSubPage");K.appendChild(B);N.subpage=B;var U=document.createElement("p");U.className="genericRot_vertical";U.style.color="red";U.style.marginTop="20px";U.innerHTML="Extra CSS";var Y=document.createElement("textarea");Y.addEventListener("input",function(){F.onclick()});Y.style.height="150px";Y.value="";K.appendChild(U);K.appendChild(Y);var D={};var X=H.style.cssText.split(";");X.pop();for(var S in X){var T=X[S].split(":");var G=document.createElement("p");G.style.margin="0";G.style.textAlign="left";G.innerHTML=T[0];var C=document.createElement("input");C.addEventListener("input",function(){F.onclick()});C.value=T[1];D[T[0]]=C;K.appendChild(G);K.appendChild(C)}M.style=H.style.cssText;F.onclick=function(){setCode(P,H,M,D,Y,N)};document.body.appendChild(K);setTimeout(function(){K.style.right="0";endTrans=function(){endTrans=null}},10)};var setCode=function(C,B,F,G,E,D){B.innerHTML=C.value;if(D.page.value!=""&&D.subpage.value==""){B.removeAttribute("toSubPage");B.setAttribute("toPage",D.page.value);F.onclick.value="internalNavMenu('"+D.page.value+"')";B.setAttribute("onclick","internalNavMenu('"+D.page.value+"')")}else{if(D.page.value!=""&&D.subpage.value!=""){B.setAttribute("toPage",D.page.value);B.setAttribute("toSubPage",D.subpage.value);F.onclick.value="internalNavMenu('"+D.page.value+"','"+D.subpage.value+"')";B.setAttribute("onclick","internalNavMenu('"+D.page.value+"','"+D.subpage.value+"')")}else{B.removeAttribute("toPage");B.removeAttribute("toSubPage");B.removeAttribute("onclick");D.subpage.value="";if(F.onclick.value.indexOf("internalNavMenu")>-1){F.onclick.value=""}}}for(var A in F){if(F[A].value!=""){if(A=="onclick"){B.setAttribute("onclick",F[A].value)}else{B[A]=F[A].value}}else{if(A=="onclick"&&D.page.value==""){B.removeAttribute("onclick")}else{if(A=="className"){B.removeAttribute("class")}else{if(A!="onclick"&&A!="className"){B.removeAttribute(A)}}}}}B.removeAttribute("style");for(var A in G){if(G[A].value!=""){if(A.indexOf("opacity")<=-1){B.style.cssText+=A+":"+G[A].value+";"}else{if(G[A].value.indexOf("initial")<=-1){B.style.cssText+=A+":"+G[A].value+";"}}}}B.style.cssText+=E.value};var antSection=null;var iniSection=4;var ini=null;var initalized=false;var message=null;var savePB=null;var user="";var all="";var horMenu=null;var menuAdmin=null;var menuAdmin=null;var menuPB=null;var serialCode=null;function sections(){var A=this;A.tabs=ko.observable();A.ini=function(){var B=new Date().getTime();$.getJSON("../controller/environment/json/groups.json?"+B,function(C){}).complete(function(C){horMenu=document.getElementById("menuContainer");menuAdmin=document.getElementById("menu");A.tabs(C.responseJSON.items);all=document.getElementById("all");if(!initalized){if(document.getElementById("userSession")){user=document.getElementById("userSession").value}applyFonts();ini=document.getElementById("menu_"+C.responseJSON.items[iniSection].date);var D=document.createElement("div");D.id="editorPB";D.innerHTML="EDITOR";D.onclick=openEditor;document.body.appendChild(D);menuPB=document.createElement("div");menuPB.id="menuPB";menuPB.innerHTML="menu";menuPB.onclick=function(){showMenu()};document.body.appendChild(menuPB);ini.click();horMenu.onclick=function(){showMenu()};all.onclick=function(){hideMenu()};initalized=true;createLanDiv();changeLanguage();var E="";var F={};F.url=document.URL.split("/admin")[0]+"/";$.ajax({url:"http://clipbloc.com/register/list/webService_1.php",type:"GET",data:F,beforeSend:function(){},success:function(G){},error:function(){}})}})};A.SelSection=function(B){if(antSection!==null){if(antSection.indexOf("menu")>-1){document.getElementById(antSection).className="innerMenu"}else{document.getElementById(antSection).className="innerFoot"}}antSection="menu_"+B.date;document.getElementById(antSection).className="innerMenu tabSelected";switch(B.content){case"multipleUser":serialCode.innerHTML="multipleUser";createMultipleUser();break;case"security":serialCode.innerHTML="security";createSecurity("page_menu_"+B.date,B.content,B.rot);break;case"upload":serialCode.innerHTML="Upload";createUploader("page_menu_"+B.date,B.content,B.rot);break;case"css":serialCode.innerHTML="Styling";createMenu("page_menu_"+B.date,B.content,B.rot);break;default:serialCode.innerHTML=B.submenu;createPage("page_menu_"+B.date,B.content,B.submenu,B.date);break}}}var iniSections=new sections;var admin_core=function(){serialCode=document.getElementById("serialCode");ko.applyBindings(iniSections,document.getElementById("menu"));iniSections.ini()};var initialized=function(){ini.click()};var lastPage=null;var iniLast=false;var moveSense="AV";var createPage=function(A,C,B,E){if(lastPage===null){var D=document.createElement("div");D.className="page generic_trans";D.id=A;D.style.left="100%";all.appendChild(D);$("#"+A).load("./pages/"+C+".html",function(){var F=new menu_level_2();ko.applyBindings(F,document.getElementById("menu_level_2"));F.ini(B);pageFocus=D})}else{if(A!==lastPage.id){document.getElementById("menu_level_2").id="old";var D=document.createElement("div");D.className="page generic_trans";D.id=A;all.appendChild(D);$("#"+A).load("./pages/"+C+".html",function(){var F=new menu_level_2();pageFocus=D;ko.applyBindings(F,document.getElementById("menu_level_2"));F.ini(B)})}}};var createMenu=function(A,C,B){if(A!==lastPage.id){document.getElementById("menu_level_2").id="old";var D=document.createElement("div");D.className="page generic_trans";D.id=A;if(lastPage&&moveSense==="RE"){D.style.left="-100%"}else{D.style.left="100%"}all.appendChild(D);$("#"+A).load("./pages/"+C+".html",function(){applyStyles();var E=new style_collection();ko.applyBindings(E,document.getElementById("menu_level_2"));E.ini("css1",B);setTimeout(function(){if(lastPage){lastPage.style.position="absolute";lastPage.style.overflow="hidden";if(moveSense==="AV"){lastPage.style.left="-100%";D.style.left="0px"}else{lastPage.style.left="100%";D.style.left="0px"}}else{pageFocus.style.left="0px"}endTrans=function(){if(D.offsetLeft===0&&lastPage){all.removeChild(lastPage);savePB=document.getElementById("savePB");message=document.getElementById("message");lastPage=null;endTrans=null;lastPage=D}}},10)})}};var createUploader=function(A,C,B){controlFiles()};var createSecurity=function(A,C,B){controlSecurity()};var createMultipleUser=function(){multipleUser()};function item_level_2(B,G,E,H,F,A,I,C,D){var J=this;J.id=ko.observable();J.rot=B;J.desc=G;J.image=E;J.content=H;J.active=F;J.submenu=A;J.subMenuId=I;J.date=C;J.clipbloc=D}var sectionGroup=null;var delPageArray=new Array();var delMenuArray=new Array();var pageFocus=null;var tabsFocus=null;function menu_level_2(){var self=this;self.tabs=ko.observableArray();self.ini=function(tabs){if(tabs!=="groups"&&tabs!=="config"&&tabs!=="fonts"&&tabs!=="multipleUser"&&tabs!=="security"&&tabs!=="upload"&&tabs!=="css"){var pathJSON="./controller/environment/json/"+tabs+".json?"}else{pathJSON="../controller/environment/json/"+tabs+".json?"}tabsFocus=tabs;delPageArray=new Array();delMenuArray=new Array();sectionGroup=tabs;var refresh=new Date().getTime();$.getJSON(pathJSON+refresh,function(data){}).complete(function(data){var listPos=new Array();for(var j in data.responseJSON.items){if(!data.responseJSON.items[j]["adCode"]){data.responseJSON.items[j]["adCode"]=""}}setTimeout(function(){if(lastPage){lastPage.style.position="absolute";self.tabs(data.responseJSON.items);if(moveSense==="AV"){lastPage.style.left="-100%";pageFocus.style.left="0px"}else{lastPage.style.left="100%";pageFocus.style.left="0px"}}else{self.tabs(data.responseJSON.items);pageFocus.style.left="0px"}endTrans=function(){if(pageFocus.offsetLeft===0&&lastPage){all.removeChild(lastPage);savePB=document.getElementById("basicSavePB");message=document.getElementById("message");endTrans=null;lastPage=pageFocus}else{if(pageFocus.offsetLeft===0&&!iniLast){endTrans=null;iniLast=true;lastPage=pageFocus}}}},10)})};self.reset=function(tab){document.getElementById("clipbloc_"+tab.date).value="";$("#clipbloc_"+tab.date).trigger("change");document.getElementById("clipImg_"+tab.date).setAttribute("src","null")};self.positionChanged=function(tab,event){var oldPosition=event.target.id;var position=event.target.selectedIndex;var oldItem=self.tabs()[oldPosition];self.tabs.remove(self.tabs()[oldPosition]);if(oldPosition>position){self.tabs.splice(position,0,oldItem)}else{self.tabs.splice(position+1,0,oldItem)}};self.SelSection=function(tab){if(antSection!==null){if(antSection.indexOf("menu")>-1){document.getElementById(antSection).className="innerMenu"}else{document.getElementById(antSection).className="innerFoot"}}antSection="menu_"+tab.id;document.getElementById(antSection).className="innerMenu tabSelected";createPage("page_menu_"+tab.id,tab.content,eval(tab.submenu),tab.subMenuId)};self.SelSectionSub=function(tab){if(antSection!==null){if(antSection.indexOf("menu")>-1){document.getElementById(antSection).className="innerMenu"}else{document.getElementById(antSection).className="innerFoot"}}antSection="menu_"+tab.date;document.getElementById(antSection).className="innerMenu tabSelected";switch(tab.content){case"security":console.innerHTML="security";serialCode.innerHTML="security";createSecurity("page_menu_"+tab.date,tab.content,tab.rot);break;case"multipleUser":console.innerHTML="multipleUser";serialCode.innerHTML="multipleUser";createMultipleUser();break;case"upload":console.innerHTML="Upload";serialCode.innerHTML="Upload";createUploader("page_menu_"+tab.date,tab.content,tab.rot);break;case"css":console.innerHTML="Styling";serialCode.innerHTML="Styling";createMenu("page_menu_"+tab.date,tab.content,tab.rot);break;default:console.innerHTML=tab.submenu;serialCode.innerHTML=tab.submenu;createPage("page_menu_"+tab.date,tab.content,tab.submenu,tab.date);break}};self.anadir=function(){var htmlDate=new Date().getTime();self.tabs.push(new item_level_2("New","empty","empty","basic",true,"",null,htmlDate,""));message=document.getElementById("message");message.innerHTML="Waiting...";message.className="col-xs-6 basicPB";scrollToBottom(document.body,document.body.scrollHeight,1000,htmlDate);savePB=document.getElementById("basicSavePB");savePB.className=savePB.className+" basicSavePB_active";var refresh=new Date().getTime();var urlIni=document.URL.split("/admin")[0];var fbSharer=urlIni+"/pages/"+htmlDate+"/facebook.html?refresh="+refresh;var fbToClip=urlIni+"/index.php?view="+htmlDate;saveHTMLPage("<div id='htmlContent' style='height:100%;position:relative'>\n<div class='basicOuter'><div class='basicInner'>CLIP</div></div>\n</div>","New","No define",urlIni+"/pages/"+htmlDate+"/fbImg.jpg?refresh="+refresh,fbSharer,htmlDate,fbToClip)};self.guardar=function(){if(user==="test"){showTestModeDiv()}else{if(tabsFocus!=="groups"&&tabsFocus!=="config"&&tabsFocus!=="fonts"&&tabsFocus!=="multipleUser"&&tabsFocus!=="security"&&tabsFocus!=="upload"&&tabsFocus!=="css"){var json0=ko.toJSON(self.tabs);var CUERPO0='{"items":'+json0+"}";var jsonPublic=new Array();for(var j in self.tabs()){var cloned={};for(var k in self.tabs()[j]){cloned[k]=self.tabs()[j][k];for(var l in self.tabs()[j][k]){if(l!=="import"&&l!=="importCode"&&l!=="bridge"&&l!=="bridgeCode"){cloned[k][l]=self.tabs()[j][k][l]}}}jsonPublic.push(cloned)}var json=ko.toJSON(jsonPublic);var CUERPO='{"items":'+json+"}";if(delPageArray.length>0){var params="method=save_JSON&CUERPO0="+CUERPO0+"&URL0=./json/"+tabsFocus+".json&CUERPO="+CUERPO+"&URL=../../../controller/environment/json/"+sectionGroup+".json&delPages="+delPageArray.toString()}else{params="method=save_JSON&CUERPO0="+CUERPO0+"&URL0=./json/"+tabsFocus+".json&CUERPO="+CUERPO+"&URL=../../../controller/environment/json/"+sectionGroup+".json"}}else{json=ko.toJSON(self.tabs);CUERPO='{"items":'+json+"}";if(delPageArray.length>0){var params="method=save_JSON&CUERPO="+CUERPO+"&URL=../../../controller/environment/json/"+sectionGroup+".json&delPages="+delPageArray.toString()}else{params="method=save_JSON&CUERPO="+CUERPO+"&URL=../../../controller/environment/json/"+sectionGroup+".json"}}loadXMLDoc("./controller/environment/save.php",params);delPageArray=new Array()}};self.eliminar=function(tabs){if(sectionGroup==="groups"){delMenuArray.push(tabs.date)}else{delPageArray.push(tabs.date)}self.tabs.remove(tabs);savePB=document.getElementById("basicSavePB");message=document.getElementById("message");message.className="col-xs-6 basicPB";message.innerHTML="Waiting...";savePB.className=savePB.className+" basicSavePB_active"};self.createHTML=function(tabs){if(tabs.rot==="undefined"){tabs.rot="No define"}if(tabs.desc==="undefined"){tabs.desc="No define"}if(tabs.image==="undefined"){tabs.image="No define"}if(tabs.url==="undefined"){tabs.url="No define"}var refresh=new Date().getTime();var urlIni=document.URL.split("/admin")[0];var fbSharer=urlIni+"/pages/"+tabs.date+"/facebook.html?refresh="+refresh;var fbToClip=urlIni+"/index.php?view="+tabs.date;getHTML(tabs.rot,tabs.desc,urlIni+"/pages/"+tabs.date+"/fbImg.jpg?refresh="+refresh,fbSharer,tabs.date,fbToClip)};self.anadirGroup=function(){if(user==="test"){showTestModeDiv()}else{var htmlDate=new Date().getTime();self.tabs.push(new item_level_2("New","empty","empty","basic",true,htmlDate,null,htmlDate,htmlDate,""));var json=ko.toJSON(self.tabs);var CUERPO='{"items":'+json+"}";var params="method=save_group_JSON&JSON=../../../controller/environment/json/"+htmlDate+".json&CUERPO="+CUERPO+"&URL=../../../controller/environment/json/"+sectionGroup+".json&URL0=./json/"+htmlDate+".json";loadXMLDoc("./controller/environment/saveJSON.php",params)}};self.guardarGroup=function(){message=document.getElementById("message");message.className="col-xs-6 basicPB";savePB=document.getElementById("basicSavePB");savePB.className="col-xs-3 basicPB";if(user==="test"){showTestModeDiv()}else{var json0=ko.toJSON(self.tabs);var CUERPO0='{"items":'+json0+"}";var jsonPublic=new Array();for(var j in self.tabs()){var cloned={};for(var k in self.tabs()[j]){cloned[k]=self.tabs()[j][k];for(var l in self.tabs()[j][k]){if(l!=="import"&&l!=="importCode"&&l!=="bridge"&&l!=="bridgeCode"){cloned[k][l]=self.tabs()[j][k][l]}}}jsonPublic.push(cloned)}var json=ko.toJSON(jsonPublic);var CUERPO='{"items":'+json+"}";if(delMenuArray.length>0){contGroup=delMenuArray.length;var refresh=new Date().getTime();var getLocal=function(origen){$.getJSON("../controller/environment/json/"+origen+".json?"+refresh,function(data){}).complete(function(data){var delPageArrayFrom=new Array();for(var l in data.responseJSON.items){delPageArrayFrom.push(data.responseJSON.items[l].date)}if(delPageArrayFrom.length>0){var params="method=save_group_JSON&CUERPO0="+CUERPO0+"&URL0=./json/"+sectionGroup+".json&CUERPO="+CUERPO+"&URL=../../../controller/environment/json/"+sectionGroup+".json&delJSON="+origen+"&delPages="+delPageArrayFrom.toString()}else{params="method=save_group_JSON&CUERPO0="+CUERPO0+"&URL0=./json/"+sectionGroup+".json&CUERPO="+CUERPO+"&URL=../../../controller/environment/json/"+sectionGroup+".json&delJSON="+origen}loadXMLDoc("./controller/environment/save.php",params)})};for(var j in delMenuArray){getLocal(delMenuArray[j])}}else{contGroup=delMenuArray.length;params="method=save_group_JSON&CUERPO0="+CUERPO0+"&URL0=./json/"+sectionGroup+".json&CUERPO="+CUERPO+"&URL=../../../controller/environment/json/"+sectionGroup+".json";loadXMLDoc("./controller/environment/save.php",params)}}};self.extend=function(tabs){var selTab=document.getElementById("div_"+tabs.date);if(selTab.style.height==="550px"){selTab.style.height="0"}else{if(document.getElementById(lastExtend)){document.getElementById(lastExtend).style.height="0"}selTab.style.height="550px";lastExtend="div_"+tabs.date}};self.resetSub=function(input){var inputSelect=document.getElementById(input);inputSelect.value="";$("#"+input).trigger("change")};self.setReset=function(tab){var goSel=document.getElementById("go_asoc_"+tab.date);if(tab.submenu===""){goSel.style.visibility="hidden"}else{goSel.style.visibility="visible";goSel.style.display="inline-block"}};self.SelGoSub=function(asoc){var selSub=document.getElementById("menu_"+asoc);selSub.click()};self.listUsers=function(tabs){showUsersList(tabs.date)};return self}var lastExtend=null;save_JSON=function(){savePB=document.getElementById("basicSavePB");message=document.getElementById("message");message.innerHTML="Saved";message.className=message.className+" message_active";savePB.className="col-xs-3 basicPB"};var contGroup=0;save_group_JSON=function(A){savePB=document.getElementById("basicSavePB");message=document.getElementById("message");message.innerHTML="Saved";message.className=message.className+" message_active";savePB.className="col-xs-3 basicPB";if(contGroup<=1){contGroup=0;if(sectionGroup==="groups"){location.reload()}}else{contGroup--}};openEditor=function(){openEditorDiv()};var menuPBX=null;showMenu=function(){if(horMenu.style.right!=="-15px"){horMenu.style.right="-15px";menuPBX=menuPB.style.right;menuPB.style.right=-horMenu.offsetWidth+"px"}else{horMenu.style.right=-horMenu.offsetWidth+"px";menuPB.style.right=menuPBX}};hideMenu=function(){horMenu.style.right=-horMenu.offsetWidth+"px";menuPB.style.right=menuPBX};getDirectory=function(){var A="";var B={};B.url=document.URL.split("/admin")[0]+"/";$.ajax({url:"http://clipbloc.com/register/list/webService_2.php",type:"GET",data:B,beforeSend:function(){},success:function(C){},error:function(){}})};scrollToTop=function(G){var E=window.scrollY,F=Math.PI/(G/15),B=E/2;var D=0,A,C=setInterval(function(){if(window.scrollY!=0){D=D+1;A=B-B*Math.cos(D*F);window.scrollTo(0,(E-A))}else{clearInterval(C)}},15)};scrollToBottom=function(C,H,E,D){var G=C.scrollTop,F=H-G,A=20;var B=function(J,K){J+=A;var I=easeInOut(J,G,F,E);C.scrollTop=I;if(J<E){setTimeout(function(){B(J,K)},A)}else{if(K){document.getElementById("rot_"+K).parentNode.style.background="orangered"}savePB.click()}};B(0,D)};function easeInOut(A,D,C,B){A/=B/2;if(A<1){return C/2*A*A+D}A-=1;return -C/2*(A*(A-2)-1)+D}focusText=function(){message.className="col-xs-6 basicPB";message.innerHTML="Waiting...";savePB=document.getElementById("basicSavePB");savePB.className=savePB.className+" basicSavePB_active"};focusTextReg=function(){message.className="col-xs-3 basicPB";message.innerHTML="Waiting...";savePB=document.getElementById("basicSavePB");savePB.className=savePB.className+" basicSavePB_active"};changeRot=function(A){A.addEventListener("input",function(){document.getElementById("rot_"+A.id.split("_")[1]).innerHTML=A.value;var C=A.selectionStart,B=A.selectionEnd;A.value=A.value.replace('"',"'");A.setSelectionRange(C,B)})};var testModeDiv=null;showTestModeDiv=function(){testModeDiv=document.createElement("div");testModeDiv.id="testModeDiv";testModeDiv.innerHTML='<div class="basicOuter"><div class="basicInner"><div id="statusTest"><span class="en">'+rots.testMode[language]+'</span></div><div id="closeTestModeDivPB"><span class="es" style="display: none;">Continuar</span><span class="en">Continue</span></div></div></div>';testModeDiv.onclick=function(){closeTestModeDiv()};document.body.appendChild(testModeDiv);setTimeout(function(){testModeDiv.style.left="0";endTrans=function(){endTrans=null}},10)};closeTestModeDiv=function(){if(testModeDiv){testModeDiv.style.left="-100%";endTrans=function(){if(testModeDiv.offsetLeft==="-100%"){endTrans=null;document.body.removeChild(testModeDiv);testModeDiv=null}}}};var lan="es";var areaW=0;var areaH=0;var leftFunction=null;var rightFunction=null;var upFunction=null;var downFunction=null;var noneFunction=null;var endTrans=null;var keyboard=null;var key=null;window.onload=function(){changeOri=function(){};resizeDoc=function(){areaW=window.innerWidth;areaH=window.innerHeight};window.addEventListener("resize",resizeDoc,false);window.addEventListener("orientationchange",changeOri,false);document.addEventListener("transitionend",function(e){if(endTrans!=null){endTrans()}},false);document.addEventListener("webkitTransitionEnd",function(){if(endTrans!=null){endTrans()}});keypress=function(e){key=e.keyCode?e.keyCode:e.which;if(keyboard){keyboard()}};document.onkeypress=keypress;swipedetect(window,function(swipedir){switch(swipedir){case"left":if(leftFunction!=undefined){eval(leftFunction)()}break;case"right":if(rightFunction!=undefined){eval(rightFunction)()}break;case"up":if(upFunction!=undefined){eval(upFunction)()}break;case"down":if(downFunction!=undefined){eval(downFunction)()}break;case"none":if(noneFunction!=undefined){eval(noneFunction)()}break}});leftFunction=null;rightFunction=null;upFunction=null;downFunction=null;noneFunction=null;admin_core()};